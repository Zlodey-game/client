<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zlodey 회원가입</title>

</head>
<body>
    <form action="http://192.168.0.37:3000/users/register" id="join" method="post">
        <legend>회원가임</legend>
        <input type = "text" name = "nickname" placeholder = "닉네임"/><br><br>
        <input type = "text" name = "id" placeholder = "아이디"/><br><br>
        <input type = "password" id = "passwd" name = "pw" placeholder = "비밀번호"/><br><br>
        <input type = "password" id = "passwdck" name = "passwdcheck" placeholder = "비밀번호"/><br><br>
        <span id="pw-ok" style="display: none; color: #0985b6;">
            비밀번호가 일치합니다.
        </span>
        <span id="pw-no" style="display: none; color: #d92742; font-weight: bold; ">
            비밀번호가 일치하지 않습니다.
        </span>
        <br>
        <input type = "submit" id = "send" value = "회원가입" disabled/>       
    </form>
</body>
<script>
    var form = document.getElementById("join");

    var passwd = document.getElementById('passwd');
    var passwdck = document.getElementById('passwdck');
    var ok = document.getElementById('pw-ok');
    var no = document.getElementById('pw-no');

    var passwdCorrect = false;

    form.addEventListener("input", e =>{
        if(form.nickname.value != '' && form.id.value != '' && passwdCorrect){
            form.send.disabled = false;
        }
        else form.send.disabled = true;
    });

    passwd.addEventListener("input", e =>{
        checkPasswd();
    });

    passwdck.addEventListener("input", e =>{
        checkPasswd();
    });
    
    var checkPasswd = () =>{
        var pw = passwd.value;
        var pwck = passwdck.value;
        if(pwck != ''){
            if(pw == pwck){
                ok.style.display = "inline";
                no.style.display = "none";
                passwdCorrect = true;
            }
            else{
                ok.style.display = "none";
                no.style.display = "inline";
                passwdCorrect = false;
            }
        }
        else{
            ok.style.display = "none";
            no.style.display = "none";
        }        
    }

    var checksubmit = ()=>{
        var form = document.getElementById("join");
        console.log(form.id.value)
    }

    // $('.pw').focusout(function () {
    //     var pwd1 = $("#password_1").val();
    //     var pwd2 = $("#password_2").val();
 
    //     if ( pwd1 != '' && pwd2 == '' ) {
    //         null;
    //     } else if (pwd1 != "" || pwd2 != "") {
    //         if (pwd1 == pwd2) {
    //             $("#alert-success").css('display', 'inline-block');
    //             $("#alert-danger").css('display', 'none');
    //         } else {
    //             alert("비밀번호가 일치하지 않습니다. 비밀번호를 재확인해주세요.");
    //             $("#alert-success").css('display', 'none');
    //             $("#alert-danger").css('display', 'inline-block');
    //         }
    //     }
    // });
</script>
</html>